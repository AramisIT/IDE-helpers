use master;

ALTER DATABASE [{0}] SET SINGLE_USER WITH ROLLBACK IMMEDIATE 

ALTER DATABASE [{0}] SET SINGLE_USER WITH NO_WAIT

ALTER DATABASE [{0}] SET MULTI_USER WITH ROLLBACK IMMEDIATE; 

WAITFOR DELAY '00:00:01'

GO

ALTER DATABASE [{0}] SET SINGLE_USER WITH ROLLBACK IMMEDIATE 

ALTER DATABASE [{0}] SET SINGLE_USER WITH NO_WAIT

ALTER DATABASE [{0}] SET MULTI_USER WITH ROLLBACK IMMEDIATE; 

print 'restoring'

RESTORE DATABASE [{0}]
   FROM DISK = '{1}'

GO

USE [{0}]

GO

IF  EXISTS (SELECT * FROM sys.database_principals WHERE name = N'sa_wms')
DROP USER [sa_wms]
GO
CREATE USER [sa_wms] FOR LOGIN [sa_wms]
GO

EXEC sp_addrolemember N'db_owner', N'sa_wms'
GO

print ' '

print 'Database "{0}" was successfully restored !'